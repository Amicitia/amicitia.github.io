<script src="https://amicitia.github.io/js/jquery-3.3.1.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&display=swap" rel="stylesheet">
<script src="https://kit.fontawesome.com/4c3075832a.js" crossorigin="anonymous"></script>
<script data-ad-client="ca-pub-9519592525056753" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<link href="https://amicitia.github.io/favicon.ico" rel="shortcut icon" type="image/x-icon" />
<link href="https://amicitia.github.io/css/amicitia.css" rel="stylesheet" type="text/css">
<script src="https://amicitia.github.io/js/bubbles.js"></script>
<script src="https://amicitia.github.io/js/clipboard.js"></script>
<script src="https://amicitia.github.io/js/showhide.js"></script>
<script src="https://amicitia.github.io/js/hidenav.js"></script>
<script src="https://amicitia.github.io/js/navigation.js"></script>
<script type="text/javascript" src="https://amicitia.github.io/js/FeedEk.min.js"></script>
<script type="text/javascript" src="https://amicitia.github.io/js/jscolor.js"></script>
<link rel="stylesheet" href="https://amicitia.github.io/css/css3menu.css" type="text/css" />
<style type="text/css">._css3m {display: none;}</style>				</td>
				<!--Sidebar-->
                <td style="vertical-align:top;width:20%;text-align:right;font-size:10pt;" class="bloglinks">
					<b>LATEST UPDATES</b>
                    <div id="news-feed"></div>
                    <div id="guides-feed"></div>
                    <div id="blog-feed"></div>
                    <script>
						$('#news-feed').FeedEk({
							FeedUrl:'https://shrinefox.com/news/feed',
							MaxCount : 3,
							ShowDesc : false,
							ShowPubDate:true,
							DescCharacterLimit:0,
							TitleLinkTarget:'_blank',
							DateFormat: 'MMM d',
							DateFormatLang:'en'
						});

						$('#guides-feed').FeedEk({
							FeedUrl:'https://shrinefox.com/guides/feed',
							MaxCount : 3,
							ShowDesc : false,
							ShowPubDate:true,
							DescCharacterLimit:0,
							TitleLinkTarget:'_blank',
							DateFormat: 'MMM d',
							DateFormatLang:'en'
						});

						$('#blog-feed').FeedEk({
							FeedUrl:'https://shrinefox.com/blog/feed',
							MaxCount : 3,
							ShowDesc : false,
							ShowPubDate:true,
							DescCharacterLimit:0,
							TitleLinkTarget:'_blank',
							DateFormat: 'MMM d',
							DateFormatLang:'en'
						});
                    </script><div class="container body-content">
	<table>
        <tr>
            <td width="25%" style="vertical-align:top">
                <div class="content-outer">
                    <div class="content"><br>
						Basics
						<br>↳ <a href="https://amicitia.github.io/docs/flowscript">Flowscript</a>
						<br>↳ <a href="https://amicitia.github.io/docs/messagescript">Messagescript</a>
						<br>↳ <a href="https://amicitia.github.io/docs/decompiling">Decompiling</a>
						<br>↳ <a href="https://amicitia.github.io/docs/compiling">Compiling</a>
						<br>
						<br>Features
						<br>↳ <a href="https://amicitia.github.io/docs/importing">Importing</a>
						<br>↳ Declaring Functions
						<br>↳ Declaring Variables
						<br>↳ <a href="https://amicitia.github.io/docs/hookingfunctions">Hooking Functions</a>
						<br>
						<br>P5 Functions
						<br>↳ AI
						<br>↳ Common
						<br>↳ Facility
						<br>↳ Field
						<br>↳ Net
						<br>↳ Social
					</div>
				</div>
			</td>
			<td style="width: 75%; padding-right:20px; vertical-align: top;">
				<div class="content-outer">
					<div class="content">
						<h1>Hooking Functions</h1>
						AtlusScriptCompiler is not perfect, and sometimes decompiled data is imprecise (usually float values). This can lead to glitches (weird camera/player positioning and movement) and even crashes in-game when a recompiled script is modded back in.
						<br />To get around this, AtlusScriptCompiler has a feature that preserves the original .BF's data, appending only new data to the end from your compiled .FLOW.
						<br />You can use this to <b>replace the contents of a specific method or function</b> without screwing up the rest of the file.
						<h2>Creating the .FLOW</h2>
						In this example, let's say we wanted to replace ONLY the contents of <b>fld_square_menu</b>, a method in <b>field.bf</b>.
						<br />We would have to create a new text document ending with the .FLOW extension, named anything we want. In this example, <b>fieldhook.flow</b>.
						<h2>Referencing the .BF</h2>
						In that blank document, let's import the bf. Make sure the .flow is in the same directory as the .bf and <a href="https://amicitia.github.io/docs/importing">follow the instructions from the importing guide</a>, like so:
<pre><code>import( "field.bf" );</code></pre>
						<h2>Creating the Hook</h2>
						Next, let's copy the method we want to replace from the decompiled .bf, changing whatever we want. You can even reference external methods you add to your .flow like so:
<pre><code>
import( "field.bf" );

void fld_square_menu_hook()
{
    ModMenuDisplay();
}

void ModMenuDisplay()
{
    ALL_ENABLE_SHARE_PLAY(); //Re-enables screen recording
    BIT_OFF( 4099 ); //Removes your "tired" status
...
</code></pre>
						Note that the replacement method has "_hook" appended to the name. This is important.
						<h2>Compiling the .FLOW</h2>
						Follow the same steps as the <a href="https://amicitia.github.io/docs/compiling">Compiling guide</a>, except add one extra commandline argument: "-Hook".
						<br />For example:
						<br /><pre><code>AtlusScriptCompiler.exe fieldhook.flow -Compile -OutFormat V3BE -Library P5 -Encoding P5 -Hook</code></pre>
						<br />This should generate fieldhook.bf, an identical copy of field.bf except with the <b>ModMenuDisplay()</b> method replacing the contents of <b>fld_square_menu_hook</b>.
					</div>
				</div>
			</td>
		</tr>
	</table>
</div>								<!--Pagination-->
                                </td>
							</tr>
						</table>
					</div>
                </td></tr></tbody></table>
                <!--Footer-->
                <div class="row bottom">
                    <footer>
                        <table style="padding-right: 2%;">
                            <tbody>
                                <tr>
                                    <td id="about_site" style="vertical-align: top;width: 25%;">
                                        <center>
                                            <div class="amicitia-logo" style="left: auto;position: relative;width: 75px;height: 75px;float: none;">
                                                <div class="amicitia-svg" style="height: 75px; width: 75px;background: url(https://amicitia.github.io/images/logo.svg) center center/75px no-repeat;"></div>
                                            </div>
                                        </center>
                                        <br>
                                        <a href="https://shrinefox.com/amicitia">Amicitia</a> is a modding network dedicated to documenting & reverse engineering SMT/Persona games, named after <a href="https://github.com/TGEnigma">TGEnigma</a>'s all-in-one editor application <a href="https://amicitia.github.io/post/amicitia">of the same name</a>.
                                        <br><br>
                                        <a href="https://shrinefox.com/">ShrineFox</a> is a content creator that loves modding games, customizing devices, and making useful utilities.
                                    </td>
                                    <td id="site_disclaimer" width="5%" style="vertical-align:top;"></td>
                                    <td>
                                        We are NOT affiliated, associated, authorized, endorsed by, or in any way
                                        officially connected with ATLUS, SEGA, or any of its subsidiaries or its affiliates.
                                        The official ATLUS website can be found at <a href="https://atlus.com/">https://atlus.com</a>. ATLUS and SEGA are
                                        registered in the U.S. Patent and Trademark Office. ATLUS and PERSONA are
                                        either registered trademarks or trademarks of ATLUS Co., Ltd. or its affiliates.
                                        <!--Theme Select required for bubbles.js themeing-->
                                        <table id="settings">
                                            <tr>
                                                <td style="vertical-align:top;">
                                                    <br><br>Theme: <select id="theme" name="theme" onchange="ThemeToggle()">
                                                        <option value="" selected>Default</option>
                                                        <option value="p5">Red/Black</option>
                                                        <option value="p4">Yellow/Orange</option>
                                                        <option value="p3fes">Green/Black</option>
                                                        <option value="pq">Pink/Purple</option>
                                                        <option value="custom">Custom</option>
                                                    </select>

                                                    <!--Color Picker-->
                                                    <script>
                                                        jscolor.presets.default = {
                                                            format: 'rgb', previewSize: 20, paletteCols: 1,
                                                            backgroundColor: 'rgb(var(--post))', borderColor: 'rgb(var(--post))',
                                                            padding: 5, width: 100, height: 100, mode: 'HVS',
                                                            controlBorderColor: 'rgb(var(--post))', sliderSize: 8, shadow: false
                                                        };
                                                    </script>
                                                    <div id="colorpicker" style="display:none;">
                                                        <div class="text">
                                                            <div class="toggle-title" style="cursor: pointer;" onclick="updateColorPicker()">
                                                                <a><i class="fa fa-gears"></i> Theme Settings</a>
                                                            </div>
                                                            <div class="toggle-inner" style="display:none;">
                                                                <br><button id="customlink" data-jscolor="{onChange: 'updateLink(this)',value:'rgb(var(--link))', alpha:1}">Link</button>
                                                                <br><button id="customhover" data-jscolor="{onChange: 'updateHover(this)',value:'rgb(var(--hover))', alpha:1}">Hover</button>
                                                                <br><button id="custombg" data-jscolor="{onChange: 'updateBg(this)',value:'rgb(var(--bg))', alpha:1}">Background</button>
                                                                <br><button id="custombg2" data-jscolor="{onChange: 'updateBg2(this)',value:'rgb(var(--bg2))', alpha:1}">Background 2</button>
                                                                <br><button id="customtext" data-jscolor="{onChange: 'updateText(this)',value:'rgb(var(--text))', alpha:1}">Text</button>
                                                                <br><button id="custompost" data-jscolor="{onChange: 'updatePost(this)',value:'rgb(var(--post))', alpha:1}">Post</button>
                                                                <br><button id="customtextinner" data-jscolor="{onChange: 'updateTextinner(this)',value:'rgb(var(--textinner))', alpha:1}">Inner Text</button>
                                                                <br><button id="customfooter" data-jscolor="{onChange: 'updateFooter(this)',value:'rgb(var(--footer))', alpha:1}">Footer</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="vertical-align:top;">
                                                    <!--Bubble Popping SFX Toggle-->
                                                    <br>Sound: <i id="sound" class="fas fa-volume-mute" onclick="SoundToggle()"></i>
                                                    <!--Performance Mode Toggle-->
                                                    <br>Performance Mode: <i id="performance" class="fas fa-toggle-off" onclick="PerformanceToggle()"></i>
                                                    <!--Score Display-->
                                                    <br><span id="score">0</span> bubbles popped
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                            </tbody>
                        </table>
                        <br>
                        <center>
                            <!--AdSense-->
                            <br>
                            <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-hx+4+s-4m+70" data-ad-client="ca-pub-9519592525056753" data-ad-slot="8263745709"></ins>
                            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                            <br>
                            <!--Credits-->
                            <br>© ShrineFox 2020 - 2021. <a href="https://ko-fi.com/shrinefox"><i class="fa fa-coffee"></i> Support</a>
                            <br><br>
                            <!--Placeholder-->
                            <select id="game" name="game" style="display:none;">
                                <option value="" selected>Default</option>
                            </select>
                        </center>
                        <!--End Footer-->
                    </footer>
                </div>
                <!--End Bottom-->
		     </div>
		</form>
	</body>
</html>